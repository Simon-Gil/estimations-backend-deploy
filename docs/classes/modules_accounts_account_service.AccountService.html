<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>AccountService | estimations-backend</title><meta name="description" content="Documentation for estimations-backend"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">estimations-backend</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">estimations-backend</a></li><li><a href="../modules/modules_accounts_account_service.html">modules/accounts/account.service</a></li><li><a href="modules_accounts_account_service.AccountService.html">AccountService</a></li></ul><h1>Class AccountService</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>Servicio que maneja las cuentas comerciales.</p>
<p>Este servicio proporciona funciones para la gestión de cuentas, incluyendo la creación,
actualización, eliminación y consulta.</p>
</div><div class="tsd-comment tsd-typography"></div></section><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:24</li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="modules_accounts_account_service.AccountService.html#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="modules_accounts_account_service.AccountService.html#assignCommercialManager" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>assign<wbr/>Commercial<wbr/>Manager</span></a>
<a href="modules_accounts_account_service.AccountService.html#assignDefaultPriceConfig" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>assign<wbr/>Default<wbr/>Price<wbr/>Config</span></a>
<a href="modules_accounts_account_service.AccountService.html#assignPriceConfigToAccount" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>assign<wbr/>Price<wbr/>Config<wbr/>To<wbr/>Account</span></a>
<a href="modules_accounts_account_service.AccountService.html#assignTechnicalManager" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>assign<wbr/>Technical<wbr/>Manager</span></a>
<a href="modules_accounts_account_service.AccountService.html#checkRelatedUser" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>check<wbr/>Related<wbr/>User</span></a>
<a href="modules_accounts_account_service.AccountService.html#createAccount" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>create<wbr/>Account</span></a>
<a href="modules_accounts_account_service.AccountService.html#getAccountByEmail" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>By<wbr/>Email</span></a>
<a href="modules_accounts_account_service.AccountService.html#getAccountById" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>By<wbr/>Id</span></a>
<a href="modules_accounts_account_service.AccountService.html#getAccountByProposal" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>By<wbr/>Proposal</span></a>
<a href="modules_accounts_account_service.AccountService.html#getAccountDetail" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>Detail</span></a>
<a href="modules_accounts_account_service.AccountService.html#getAccountOpportunities" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>Opportunities</span></a>
<a href="modules_accounts_account_service.AccountService.html#getAllAccounts" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>All<wbr/>Accounts</span></a>
<a href="modules_accounts_account_service.AccountService.html#updateAccount" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>update<wbr/>Account</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Constructors"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Constructors</h2></summary><section><section class="tsd-panel tsd-member"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="constructor.new_AccountService" class="tsd-anchor"></a><span class="tsd-kind-constructor-signature">new <wbr/>Account<wbr/>Service</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="modules_accounts_account_service.AccountService.html" class="tsd-signature-type tsd-kind-class">AccountService</a><a href="#constructor.new_AccountService" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><h4 class="tsd-returns-title">Returns <a href="modules_accounts_account_service.AccountService.html" class="tsd-signature-type tsd-kind-class">AccountService</a></h4></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Methods"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Methods</h2></summary><section><section class="tsd-panel tsd-member"><a id="assignCommercialManager" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>assign<wbr/>Commercial<wbr/>Manager</span><a href="#assignCommercialManager" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="assignCommercialManager.assignCommercialManager-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">assign<wbr/>Commercial<wbr/>Manager</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">accountId</span>, <span class="tsd-kind-parameter">commercialManagerId</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span><a href="#assignCommercialManager.assignCommercialManager-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Asigna un nuevo responsable comercial a una cuenta.</p>
<p>La función actualiza la cuenta especificada, asignando al responsable comercial proporcionado.
Si ocurre un error al obtener la cuenta o al asignar el responsable comercial, se lanza un error con el mensaje correspondiente.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">accountId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador único de la cuenta a la que se asignará el responsable comercial.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">commercialManagerId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador del nuevo responsable comercial que se asignará a la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws" class="tsd-anchor"></a>Throws<a href="#Throws" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si ocurre un error al asignar al responsable comercial (500).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:439</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="assignDefaultPriceConfig" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>assign<wbr/>Default<wbr/>Price<wbr/>Config</span><a href="#assignDefaultPriceConfig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="assignDefaultPriceConfig.assignDefaultPriceConfig-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">assign<wbr/>Default<wbr/>Price<wbr/>Config</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">accountId</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_account_entity.AccountEntity.html" class="tsd-signature-type tsd-kind-class">AccountEntity</a><span class="tsd-signature-symbol">&gt;</span><a href="#assignDefaultPriceConfig.assignDefaultPriceConfig-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Asigna la configuración de precios por defecto a una cuenta comercial.</p>
<p>La función obtiene la configuración de precios por defecto y la asigna a la cuenta especificada mediante su identificador.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">accountId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador único de la cuenta a la que se desea asignar la configuración de precios.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_account_entity.AccountEntity.html" class="tsd-signature-type tsd-kind-class">AccountEntity</a><span class="tsd-signature-symbol">&gt;</span></h4><p>La cuenta comercial con la configuración de precios por defecto asignada.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-1" class="tsd-anchor"></a>Throws<a href="#Throws-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si ocurre un error al obtener o asignar la configuración de precios (500).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:401</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="assignPriceConfigToAccount" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>assign<wbr/>Price<wbr/>Config<wbr/>To<wbr/>Account</span><a href="#assignPriceConfigToAccount" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="assignPriceConfigToAccount.assignPriceConfigToAccount-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">assign<wbr/>Price<wbr/>Config<wbr/>To<wbr/>Account</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">account</span>, <span class="tsd-kind-parameter">priceConfig</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_account_entity.AccountEntity.html" class="tsd-signature-type tsd-kind-class">AccountEntity</a><span class="tsd-signature-symbol">&gt;</span><a href="#assignPriceConfigToAccount.assignPriceConfigToAccount-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Asigna una configuración de precios a una cuenta.</p>
<p>La función recibe una cuenta y una configuración de precios, y asigna dicha configuración a la cuenta. Luego, guarda la cuenta actualizada en la base de datos. Si ocurre un error al intentar guardar la cuenta, se lanzará una excepción.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">account</span>: <a href="modules_accounts_account_entity.AccountEntity.html" class="tsd-signature-type tsd-kind-class">AccountEntity</a></span><div class="tsd-comment tsd-typography"><p>La cuenta a la que se le asignará la configuración de precios.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">priceConfig</span>: <a href="modules_accounts_price_config_price_config_entity.PriceConfigEntity.html" class="tsd-signature-type tsd-kind-class">PriceConfigEntity</a></span><div class="tsd-comment tsd-typography"><p>La configuración de precios que se asignará a la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_account_entity.AccountEntity.html" class="tsd-signature-type tsd-kind-class">AccountEntity</a><span class="tsd-signature-symbol">&gt;</span></h4><p>La cuenta actualizada con la nueva configuración de precios asignada.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-2" class="tsd-anchor"></a>Throws<a href="#Throws-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si no es posible guardar la cuenta con la nueva configuración de precios (500).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:153</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="assignTechnicalManager" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>assign<wbr/>Technical<wbr/>Manager</span><a href="#assignTechnicalManager" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="assignTechnicalManager.assignTechnicalManager-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">assign<wbr/>Technical<wbr/>Manager</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">accountId</span>, <span class="tsd-kind-parameter">technicalManagerId</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span><a href="#assignTechnicalManager.assignTechnicalManager-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Asigna un nuevo responsable técnico a una cuenta.</p>
<p>La función actualiza la cuenta especificada, asignando al responsable técnico proporcionado.
Si ocurre un error al obtener la cuenta o al asignar el responsable técnico, se lanza un error con el mensaje correspondiente.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">accountId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador único de la cuenta a la que se asignará el responsable técnico.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">technicalManagerId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador del nuevo responsable técnico que se asignará a la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-3" class="tsd-anchor"></a>Throws<a href="#Throws-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si ocurre un error al asignar al responsable técnico (500).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:462</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="checkRelatedUser" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>check<wbr/>Related<wbr/>User</span><a href="#checkRelatedUser" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="checkRelatedUser.checkRelatedUser-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">check<wbr/>Related<wbr/>User</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">accountId</span>, <span class="tsd-kind-parameter">user</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">&gt;</span><a href="#checkRelatedUser.checkRelatedUser-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Verifica si un usuario está relacionado con una cuenta como responsable técnico o comercial.</p>
<p>La función comprueba si el usuario proporcionado es el responsable técnico o comercial de la cuenta
especificada por su identificador. Retorna <code>true</code> si el usuario es alguno de estos responsables; de lo contrario, retorna <code>false</code>.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">accountId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador único de la cuenta que se desea comprobar.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">user</span>: <a href="modules_user_user_entity.UserEntity.html" class="tsd-signature-type tsd-kind-class">UserEntity</a></span><div class="tsd-comment tsd-typography"><p>El usuario que se desea verificar si está relacionado con la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">&gt;</span></h4><p><code>true</code> si el usuario es el responsable técnico o comercial de la cuenta; de lo contrario, retorna <code>false</code>.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:422</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="createAccount" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>create<wbr/>Account</span><a href="#createAccount" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="createAccount.createAccount-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">create<wbr/>Account</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">email</span>, <span class="tsd-kind-parameter">name</span>, <span class="tsd-kind-parameter">commercialManagerId</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">technicalManagerId</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">isCustomer</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_dto.AccountDTO.html" class="tsd-signature-type tsd-kind-class">AccountDTO</a><span class="tsd-signature-symbol">&gt;</span><a href="#createAccount.createAccount-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Crea una nueva cuenta con la información proporcionada.</p>
<p>La función crea una nueva cuenta comercial, asignando un responsable comercial, un responsable técnico (opcional), una configuración de precios por defecto, y otros parámetros. Además, realiza comprobaciones para asegurar que el email y el nombre de la cuenta sean únicos. Si ocurre algún error durante el proceso de creación, se lanzará una excepción.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">email</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El correo electrónico de la nueva cuenta. Este debe ser único.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">name</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El nombre de la nueva cuenta. Este debe ser único.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">commercialManagerId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador del responsable comercial de la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">technicalManagerId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>(Opcional) El identificador del responsable técnico de la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">isCustomer</span>: <span class="tsd-signature-type">boolean</span></span><div class="tsd-comment tsd-typography"><p>(Opcional) Indica si la cuenta es un cliente.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_dto.AccountDTO.html" class="tsd-signature-type tsd-kind-class">AccountDTO</a><span class="tsd-signature-symbol">&gt;</span></h4><p>Un DTO con los detalles de la cuenta recién creada.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-4" class="tsd-anchor"></a>Throws<a href="#Throws-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si el email o el nombre ya están en uso (400).</p>
</div><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-5" class="tsd-anchor"></a>Throws<a href="#Throws-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si falta información requerida, como el email o el nombre (400).</p>
</div><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-6" class="tsd-anchor"></a>Throws<a href="#Throws-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si no se puede asignar el responsable comercial o técnico (400).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:180</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="getAccountByEmail" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>get<wbr/>Account<wbr/>By<wbr/>Email</span><a href="#getAccountByEmail" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="getAccountByEmail.getAccountByEmail-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">get<wbr/>Account<wbr/>By<wbr/>Email</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">email</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">null</span><span class="tsd-signature-symbol"> | </span><a href="modules_accounts_account_entity.AccountEntity.html" class="tsd-signature-type tsd-kind-class">AccountEntity</a><span class="tsd-signature-symbol">&gt;</span><a href="#getAccountByEmail.getAccountByEmail-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Obtiene una cuenta comercial a partir de su dirección de correo electrónico.</p>
<p>La función busca una cuenta en el repositorio de cuentas utilizando el correo electrónico proporcionado como criterio de búsqueda.
Si no se encuentra ninguna cuenta con el correo electrónico proporcionado, se retorna <code>null</code>.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">email</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>La dirección de correo electrónico de la cuenta que se desea obtener.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">null</span><span class="tsd-signature-symbol"> | </span><a href="modules_accounts_account_entity.AccountEntity.html" class="tsd-signature-type tsd-kind-class">AccountEntity</a><span class="tsd-signature-symbol">&gt;</span></h4><p>Una instancia de la cuenta comercial encontrada, o <code>null</code> si no se encuentra ninguna cuenta con ese correo electrónico.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:324</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="getAccountById" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>get<wbr/>Account<wbr/>By<wbr/>Id</span><a href="#getAccountById" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="getAccountById.getAccountById-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">get<wbr/>Account<wbr/>By<wbr/>Id</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">accountId</span>, <span class="tsd-kind-parameter">relations</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_account_entity.AccountEntity.html" class="tsd-signature-type tsd-kind-class">AccountEntity</a><span class="tsd-signature-symbol">&gt;</span><a href="#getAccountById.getAccountById-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Obtiene una cuenta por su identificador único.</p>
<p>La función busca una cuenta identificada por su <code>accountId</code> en la base de datos, y puede cargar relaciones adicionales si se especifican. Si la cuenta no existe o ocurre un error al obtenerla, se lanzará una excepción.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">accountId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador único de la cuenta que se desea obtener.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">relations</span>: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>(Opcional) Una lista de relaciones a cargar junto con la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_account_entity.AccountEntity.html" class="tsd-signature-type tsd-kind-class">AccountEntity</a><span class="tsd-signature-symbol">&gt;</span></h4><p>La entidad de la cuenta encontrada.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-7" class="tsd-anchor"></a>Throws<a href="#Throws-7" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si no se encuentra la cuenta (404).</p>
</div><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-8" class="tsd-anchor"></a>Throws<a href="#Throws-8" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si ocurre un error durante la operación (500).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:125</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="getAccountByProposal" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>get<wbr/>Account<wbr/>By<wbr/>Proposal</span><a href="#getAccountByProposal" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="getAccountByProposal.getAccountByProposal-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">get<wbr/>Account<wbr/>By<wbr/>Proposal</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">proposalId</span>, <span class="tsd-kind-parameter">user</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_detail_dto.AccountDetailDTO.html" class="tsd-signature-type tsd-kind-class">AccountDetailDTO</a><span class="tsd-signature-symbol">&gt;</span><a href="#getAccountByProposal.getAccountByProposal-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Obtiene los detalles de una cuenta asociada a una propuesta específica, validando los permisos del usuario.</p>
<p>La función busca una propuesta identificada por su <code>proposalId</code> y verifica si el usuario tiene permisos suficientes para ver la cuenta asociada a dicha propuesta. Si el usuario no tiene permisos de lectura o no es el responsable técnico o comercial de la cuenta, se lanzará un error.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">proposalId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador único de la propuesta relacionada con la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">user</span>: <a href="modules_user_user_entity.UserEntity.html" class="tsd-signature-type tsd-kind-class">UserEntity</a></span><div class="tsd-comment tsd-typography"><p>El usuario para el cual se realiza la consulta de la cuenta. Se verifica si el usuario tiene permisos para acceder a la cuenta asociada a la propuesta.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_detail_dto.AccountDetailDTO.html" class="tsd-signature-type tsd-kind-class">AccountDetailDTO</a><span class="tsd-signature-symbol">&gt;</span></h4><p>Un DTO con los detalles de la cuenta asociada a la propuesta solicitada.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-9" class="tsd-anchor"></a>Throws<a href="#Throws-9" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si el usuario no tiene permisos suficientes para acceder a la cuenta (403).</p>
</div><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-10" class="tsd-anchor"></a>Throws<a href="#Throws-10" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si ocurre un error al obtener la cuenta o si la propuesta no existe (404 o 500).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:99</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="getAccountDetail" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>get<wbr/>Account<wbr/>Detail</span><a href="#getAccountDetail" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="getAccountDetail.getAccountDetail-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">get<wbr/>Account<wbr/>Detail</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">accountId</span>, <span class="tsd-kind-parameter">user</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_detail_dto.AccountDetailDTO.html" class="tsd-signature-type tsd-kind-class">AccountDetailDTO</a><span class="tsd-signature-symbol">&gt;</span><a href="#getAccountDetail.getAccountDetail-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Obtiene los detalles de una cuenta específica, incluidos los datos de configuración de precios si el usuario tiene permisos.</p>
<p>La función recupera la cuenta identificada por su <code>accountId</code>, y dependiendo de los permisos del usuario, puede incluir información adicional sobre la configuración de precios. Si el usuario no tiene permisos para ver la configuración de precios, se omite esta información.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">accountId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador único de la cuenta de la cual se desean obtener los detalles.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">user</span>: <a href="modules_user_user_entity.UserEntity.html" class="tsd-signature-type tsd-kind-class">UserEntity</a></span><div class="tsd-comment tsd-typography"><p>El usuario para el cual se realiza la consulta de la cuenta. Se usa para verificar los permisos del usuario.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_detail_dto.AccountDetailDTO.html" class="tsd-signature-type tsd-kind-class">AccountDetailDTO</a><span class="tsd-signature-symbol">&gt;</span></h4><p>Un DTO que contiene los detalles completos de la cuenta solicitada.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-11" class="tsd-anchor"></a>Throws<a href="#Throws-11" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si no se puede obtener la cuenta o si el usuario no tiene los permisos necesarios para verla (404 o 403).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:72</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="getAccountOpportunities" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>get<wbr/>Account<wbr/>Opportunities</span><a href="#getAccountOpportunities" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="getAccountOpportunities.getAccountOpportunities-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">get<wbr/>Account<wbr/>Opportunities</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">accountId</span>, <span class="tsd-kind-parameter">user</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_opportunity_opportunity_dto.OpportunityDTO.html" class="tsd-signature-type tsd-kind-class">OpportunityDTO</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#getAccountOpportunities.getAccountOpportunities-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Obtiene las oportunidades comerciales asociadas a una cuenta específica, filtrando los resultados según los permisos del usuario.</p>
<p>La función recupera las oportunidades relacionadas con una cuenta, asegurándose de que el usuario tenga los permisos adecuados para acceder a ellas. Además, se filtran las propuestas asociadas a las oportunidades según los permisos del usuario (tanto para leer todas las propuestas como solo las que le pertenecen).</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">accountId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador único de la cuenta cuya información de oportunidades se desea obtener.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">user</span>: <a href="modules_user_user_entity.UserEntity.html" class="tsd-signature-type tsd-kind-class">UserEntity</a></span><div class="tsd-comment tsd-typography"><p>El usuario que realiza la solicitud, utilizado para verificar los permisos de acceso.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_opportunity_opportunity_dto.OpportunityDTO.html" class="tsd-signature-type tsd-kind-class">OpportunityDTO</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>Un arreglo de DTOs de oportunidades asociadas a la cuenta, con las propuestas filtradas de acuerdo con los permisos del usuario.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-12" class="tsd-anchor"></a>Throws<a href="#Throws-12" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si ocurre un error al intentar obtener las oportunidades de la cuenta (500).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:254</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="getAllAccounts" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>get<wbr/>All<wbr/>Accounts</span><a href="#getAllAccounts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="getAllAccounts.getAllAccounts-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">get<wbr/>All<wbr/>Accounts</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">user</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_dto.AccountDTO.html" class="tsd-signature-type tsd-kind-class">AccountDTO</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#getAllAccounts.getAllAccounts-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Obtiene una lista de todas las cuentas disponibles, filtradas según los permisos del usuario.</p>
<p>Esta función verifica si el usuario tiene permisos de lectura (<code>read</code>) sobre las cuentas. Si el usuario no tiene acceso general a las cuentas, la lista se filtra para devolver solo aquellas que están relacionadas con el usuario.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">user</span>: <a href="modules_user_user_entity.UserEntity.html" class="tsd-signature-type tsd-kind-class">UserEntity</a></span><div class="tsd-comment tsd-typography"><p>El usuario para el cual se realiza la consulta de cuentas. Se usa para verificar si el usuario tiene permisos de acceso a las cuentas.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_dto.AccountDTO.html" class="tsd-signature-type tsd-kind-class">AccountDTO</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>Una lista de DTOs de cuentas que el usuario tiene permitido ver.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-13" class="tsd-anchor"></a>Throws<a href="#Throws-13" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si no se encuentra ninguna cuenta que coincida con los permisos del usuario (404).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:36</li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="updateAccount" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>update<wbr/>Account</span><a href="#updateAccount" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="updateAccount.updateAccount-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">update<wbr/>Account</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">id</span>, <span class="tsd-kind-parameter">name</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">email</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">commercialManagerId</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">technicalManagerId</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">isCustomer</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_dto.AccountDTO.html" class="tsd-signature-type tsd-kind-class">AccountDTO</a><span class="tsd-signature-symbol">&gt;</span><a href="#updateAccount.updateAccount-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Actualiza los datos de una cuenta comercial existente.</p>
<p>La función permite actualizar varios atributos de una cuenta comercial, tales como el nombre, el correo electrónico,
el responsable comercial y técnico, así como el campo booleano <code>isCustomer</code>. Además, verifica que el correo electrónico
no esté siendo utilizado por otra cuenta.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">id</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>El identificador único de la cuenta que se desea actualizar.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">name</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>(Opcional) El nuevo nombre de la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">email</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>(Opcional) El nuevo correo electrónico de la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">commercialManagerId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>(Opcional) El identificador del nuevo responsable comercial de la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">technicalManagerId</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>(Opcional) El identificador del nuevo responsable técnico de la cuenta.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">isCustomer</span>: <span class="tsd-signature-type">boolean</span></span><div class="tsd-comment tsd-typography"><p>(Opcional) El nuevo valor del campo booleano <code>isCustomer</code>, indicando si la cuenta es un cliente.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="modules_accounts_dtos_account_dto.AccountDTO.html" class="tsd-signature-type tsd-kind-class">AccountDTO</a><span class="tsd-signature-symbol">&gt;</span></h4><p>Un objeto <code>AccountDTO</code> con la información de la cuenta actualizada.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-14" class="tsd-anchor"></a>Throws<a href="#Throws-14" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Si el correo electrónico está asignado a otra cuenta o si ocurre un error al actualizar la cuenta (409, 500).</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in src/modules/accounts/account.service.ts:346</li></ul></aside></li></ul></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Constructors</summary><div><a href="#constructor" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Methods</summary><div><a href="#assignCommercialManager" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>assign<wbr/>Commercial<wbr/>Manager</span></a><a href="#assignDefaultPriceConfig" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>assign<wbr/>Default<wbr/>Price<wbr/>Config</span></a><a href="#assignPriceConfigToAccount" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>assign<wbr/>Price<wbr/>Config<wbr/>To<wbr/>Account</span></a><a href="#assignTechnicalManager" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>assign<wbr/>Technical<wbr/>Manager</span></a><a href="#checkRelatedUser" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>check<wbr/>Related<wbr/>User</span></a><a href="#createAccount" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>create<wbr/>Account</span></a><a href="#getAccountByEmail" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>By<wbr/>Email</span></a><a href="#getAccountById" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>By<wbr/>Id</span></a><a href="#getAccountByProposal" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>By<wbr/>Proposal</span></a><a href="#getAccountDetail" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>Detail</span></a><a href="#getAccountOpportunities" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Account<wbr/>Opportunities</span></a><a href="#getAllAccounts" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>All<wbr/>Accounts</span></a><a href="#updateAccount" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>update<wbr/>Account</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>estimations-backend</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
